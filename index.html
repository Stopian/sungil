<!DOCTYPE html>
<html>
<head>
    <title>최단거리 계산</title>
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c396eec2d60f543b080e300a54e1edf7&libraries=services"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <h1>최단거리 계산</h1>
    <label for="start">출발지:</label>
    <input type="text" id="start">
    <br>
    <label for="end">도착지:</label>
    <input type="text" id="end">
    <br>
    <button onclick="calculateDistance()">최단거리 계산</button>
    <br>
    <div id="map" style="width: 500px; height: 400px;"></div>
    <div id="distance"></div>

    <script>
        var map;
        var startMarker;
        var endMarker;
        var distance;

        function initMap() {
            var container = document.getElementById('map');
            var options = {
                center: new kakao.maps.LatLng(37.5665, 126.9780), // 서울의 위도와 경도
                level: 5 // 지도 확대 레벨
            };
            map = new kakao.maps.Map(container, options);
        }

        function calculateDistance() {
            var start = document.getElementById('start').value;
            var end = document.getElementById('end').value;

            var geocoder = new kakao.maps.services.Geocoder();

            geocoder.addressSearch(start, function (startResult, status) {
                if (status === kakao.maps.services.Status.OK) {
                    var startCoords = new kakao.maps.LatLng(startResult[0].y, startResult[0].x);
                    startMarker = new kakao.maps.Marker({
                        position: startCoords,
                        map: map
                    });
                } else {
                    alert('출발지를 찾을 수 없습니다.');
                    return;
                }

                geocoder.addressSearch(end, function (endResult, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        var endCoords = new kakao.maps.LatLng(endResult[0].y, endResult[0].x);
                        endMarker = new kakao.maps.Marker({
                            position: endCoords,
                            map: map
                        });
                    } else {
                        alert('도착지를 찾을 수 없습니다.');
                        return;
                    }

                    var distance = kakao.maps.services.Distance();
                    distance.distance(startCoords, endCoords, function (result, status) {
                        if (status === kakao.maps.services.Status.OK) {
                            document.getElementById('distance').innerHTML = '최단거리: ' + (result / 1000).toFixed(2) + ' km';
                        } else {
                            alert('거리를 계산할 수 없습니다.');
                        }
                    });
                });
            });
        }
    </script>
    <script async defer src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c396eec2d60f543b080e300a54e1edf7&callback=initMap"></script>
</body>
</html>
